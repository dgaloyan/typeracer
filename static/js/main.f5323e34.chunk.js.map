{"version":3,"sources":["components/timer/formatTime.js","components/timer/Timer.js","withAppContainer.js","commons/highlight.js","components/board/Text.js","components/board/InputText.js","commons/Loader.js","components/board/Stats.js","components/board/Board.js","app/TextProvider.js","app/AppContainer.js","app/PercentageAnalyser.js","app/WPMAnalyser.js","app/TextMatchingStrategy.js","app/MatchingStrategyFactory.js","app/Result.js","app/StatsRepository.js","app/UserRepository.js","components/auth/Register.js","components/auth/Login.js","commons/PrivateRoute.js","components/stats/Stats.js","commons/PublicRoute.js","App.js","serviceWorker.js","index.js"],"names":["formatTime","millis","seconds","Math","floor","h","m","s","substr","Timer","time","onFinish","start","useState","countdown","setCountdown","intervalId","useRef","timer","useEffect","current","setInterval","clearInterval","className","AppContainerCtx","createContext","withAppContainer","Component","props","useContext","Highlighted","children","color","text","progress","highlightedText","setHighlightedText","startIndex","endIndex","substring","highlight","style","userSelect","InputText","onChange","disabled","value","onPaste","e","preventDefault","Loader","loading","margin","fontSize","Stats","stats","length","map","stat","key","href","appContainer","textMatchingStrategy","setTextMatchingStrategy","setLoading","isTimerStarted","setTimerStarted","setDisabled","setText","setProgress","errorText","setErrorText","inputText","setInputText","setStats","finishTime","setFinishTime","matchingStrategyFactory","useCallback","getMatchingStrategyFactory","timeToComplete","getTimeToComplete","Promise","resolve","then","a","textProvider","getText","texts","create","matchIndex","check","generateReport","analysers","getAnalysers","results","forEach","analyser","push","analyse","getStatsRepository","save","r","reset","onTimerFinish","TimerMemo","onClick","opacity","target","TextProvider","httpClient","this","get","data","join","AppContainer","statsRepository","userRepository","PercentageAnalyser","toFixed","WPMAnalyser","wpm","TextMatchingStrategy","bind","input","matchEndIndex","charAt","MatchingStrategyFactory","Result","error","StatsRepository","jsonData","currentUser","find","user","username","Date","put","savedStats","UserRepository","subscribers","isLoggedIn","localStorage","getItem","setItem","JSON","stringify","notify","response","removeItem","parse","event","func","Map","set","toString","delete","setUsername","setError","history","useHistory","register","getUserRepository","result","type","login","userRepo","path","component","to","allStats","userStats","width","marginBottom","st","timeFromUrl","URL","window","location","searchParams","TIME_TO_COMPLETE","App","axios","setLoggedIn","subscribe","loginState","logout","Provider","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.f5323e34.chunk.js","sourcesContent":["export const formatTime = (millis) => {\n    const seconds = Math.floor(millis / 1000)\n\n    const h = Math.floor(seconds / 60 / 60)\n    const m = Math.floor(seconds / 60) - (h * 60)\n    const s = seconds % 60\n\n    return ('0' + h).substr(-2) + ':' + ('0' + m).substr(-2) + ':' + ('0' + s).substr(-2)\n}\n","import React, {useEffect, useRef, useState} from 'react'\nimport {formatTime}                         from './formatTime'\nimport './styles.scss'\n\nconst Timer = ({time, onFinish, start}) => {\n\n    const [countdown, setCountdown] = useState(formatTime(time))\n    const intervalId                = useRef(0)\n    const timer                     = useRef(time)\n\n    const startTimer = () => {\n\n        intervalId.current = setInterval(() => {\n            timer.current -= 1000\n            setCountdown(formatTime(timer.current))\n\n            if (timer.current === 0) {\n                clearInterval(intervalId.current)\n                setCountdown(formatTime(timer.current))\n                onFinish(timer.current)\n            }\n\n        }, 1000)\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }\n\n    useEffect(() => {\n\n        if (start) {\n            startTimer()\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [start])\n\n    return (\n        <div className={'timer'}>\n            <span>{countdown}</span>\n        </div>\n    )\n}\n\nexport default Timer","import React, {createContext, useContext} from 'react'\n\nexport const AppContainerCtx = createContext({})\n\nexport const withAppContainer = (Component) => {\n\n    return (props) => {\n        return <Component {...props} {...useContext(AppContainerCtx)}/>\n    }\n}\n","import React from 'react'\n\nconst Highlighted = ({children, color}) => {\n    return (\n        <span className={'text' + color}>\n            {children}\n        </span>\n    )\n}\n\nexport const highlight = (text, startIndex, endIndex, color) => {\n\n    if (endIndex <= 0) {\n        return text\n    }\n\n    return (\n        <>\n            {text.substring(0, startIndex)}\n            <Highlighted color={color}>\n                {text.substring(startIndex, endIndex)}\n            </Highlighted>\n            {text.substring(endIndex)}\n        </>\n    )\n}","import React, {useEffect, useState} from 'react'\nimport {withAppContainer}           from '../../withAppContainer'\nimport {highlight}                  from '../../commons/highlight'\n\nconst Text = ({text, progress}) => {\n\n    const [highlightedText, setHighlightedText] = useState(text)\n\n    useEffect(() => {\n        setHighlightedText(highlight(text, 0, progress, 'Match'))\n    }, [text, progress])\n\n\n    return (\n        <div style={{userSelect: 'none'}}>\n            {highlightedText}\n        </div>\n    )\n}\n\nexport default withAppContainer(Text)","import React from 'react'\n\nconst InputText = ({text, onChange, disabled}) => {\n\n    return (\n        <textarea disabled={disabled} onChange={onChange} value={text} onPaste={(e) => e.preventDefault()}>\n\n        </textarea>\n    )\n}\n\nexport default InputText","import React from 'react'\n\nexport const Loader = ({loading, children}) => {\n    if (loading) {\n        return <div style={{margin: '0 auto', fontSize: 32}}>Loading ...</div>\n    }\n\n    return children\n}","import React from 'react'\n\nconst Stats = ({stats}) => {\n    return (\n        <div className={'stats'}>\n            {stats.length > 0 && (\n                <>\n                    {stats.map((stat) => <div key={stat}>{stat}</div>)}\n                    <p>You can see your stats by navigating to <a href=\"/stats\">stats</a></p>\n                </>\n            )}\n        </div>\n    )\n}\n\nexport default Stats","import React, {useCallback, useEffect, useState} from 'react'\nimport Timer                                     from '../timer/Timer'\nimport './styles.scss'\nimport OutPutText                                from './Text'\nimport InputText                                 from './InputText'\nimport {Loader}                                  from '../../commons/Loader'\nimport {withAppContainer}                        from '../../withAppContainer'\nimport Stats                                     from './Stats'\n\nconst Board = ({appContainer}) => {\n\n    const [textMatchingStrategy, setTextMatchingStrategy] = useState()\n    const [loading, setLoading]                           = useState(true)\n    const [isTimerStarted, setTimerStarted]               = useState(false)\n    const [disabled, setDisabled]                         = useState(false)\n    const [text, setText]                                 = useState('')\n    const [progress, setProgress]                         = useState(0)\n    const [errorText, setErrorText]                       = useState('')\n    const [inputText, setInputText]                       = useState('')\n    const [stats, setStats]                               = useState([])\n    const [finishTime, setFinishTime]                     = useState(null)\n\n    const matchingStrategyFactory = useCallback(appContainer.getMatchingStrategyFactory(), [])\n    const timeToComplete          = useCallback(appContainer.getTimeToComplete(), [])\n\n\n    useEffect(() => {\n        Promise.resolve().then(async () => {\n            const texts = await appContainer.textProvider.getText()\n            setText(texts)\n            setLoading(false)\n            setTextMatchingStrategy(matchingStrategyFactory.create(texts))\n        })\n    }, [appContainer.textProvider, matchingStrategyFactory])\n\n\n    useEffect(() => {\n        if (textMatchingStrategy) {\n            const matchIndex = textMatchingStrategy.check(inputText)\n            setErrorText(inputText.substring(matchIndex, inputText.length))\n            setProgress(matchIndex)\n        }\n    }, [inputText, textMatchingStrategy])\n\n\n    const generateReport = async () => {\n        const analysers = appContainer.getAnalysers()\n\n        const results = []\n        const time    = finishTime === 0 ? timeToComplete : finishTime\n\n        analysers.forEach((analyser) => {\n            results.push(analyser.analyse(text, progress, inputText, time))\n        })\n\n        await appContainer.getStatsRepository().save(results)\n\n        setStats([...results])\n    }\n\n    useEffect(() => {\n        if (finishTime !== null) {\n            generateReport().then(r => {\n            })\n        }\n    }, [finishTime])\n\n\n    const reset = async () => {\n        setLoading(true)\n        const texts = await appContainer.textProvider.getText()\n        setText(texts)\n        setTextMatchingStrategy(matchingStrategyFactory.create(texts))\n        setTimerStarted(false)\n        setDisabled(false)\n        setProgress(0)\n        setErrorText('')\n        setInputText('')\n        setStats([])\n        setFinishTime(null)\n        setLoading(false)\n    }\n\n\n    const onInputTextChange = (e) => {\n\n        if (!isTimerStarted) {\n            setTimerStarted(true)\n        }\n        setInputText(e.target.value)\n    }\n\n\n    const onTimerFinish = (time) => {\n        setDisabled(true)\n        setFinishTime(time)\n    }\n\n    const TimerMemo = useCallback(() =>\n        <Timer\n            time={timeToComplete}\n            start={isTimerStarted}\n            onFinish={onTimerFinish}/>, [isTimerStarted, timeToComplete])\n\n    return (\n        <div className={'board'}>\n            Welcome to TypeRacer\n            <Stats stats={stats}/>\n            {stats.length > 0 && <button onClick={reset}>Play again</button>}\n            <TimerMemo/>\n            <Loader loading={loading}>\n                <div style={{opacity: errorText ? 1 : 0}} className={'textError'}>{errorText}</div>\n                <div className={'texts'}>\n                    <OutPutText text={text} progress={progress}/>\n                    <InputText text={inputText} onChange={onInputTextChange} disabled={disabled}/>\n                </div>\n            </Loader>\n        </div>\n    )\n}\n\nexport default withAppContainer(Board)","class TextProvider {\n\n    httpClient\n\n    constructor(httpClient) {\n        this.httpClient = httpClient\n    }\n\n    async getText() {\n        const text = await this.httpClient.get('https://baconipsum.com/api/?type=meat-and-filler?paras=2')\n        return text.data.join('')\n    }\n}\n\nexport default TextProvider","class AppContainer {\n    textProvider\n    matchingStrategyFactory\n    analysers\n    statsRepository\n    userRepository\n    timeToComplete\n\n    constructor(textProvider, matchingStrategyFactory, analysers, statsRepository, userRepository, timeToComplete) {\n        this.textProvider            = textProvider\n        this.matchingStrategyFactory = matchingStrategyFactory\n        this.analysers               = analysers\n        this.statsRepository         = statsRepository\n        this.userRepository          = userRepository\n        this.timeToComplete          = timeToComplete\n    }\n\n    getTextProvider() {\n        return this.textProvider\n    }\n\n    getMatchingStrategyFactory() {\n        return this.matchingStrategyFactory\n    }\n\n    getAnalysers() {\n        return this.analysers\n    }\n\n    getStatsRepository() {\n        return this.statsRepository\n    }\n\n    getUserRepository() {\n        return this.userRepository\n    }\n\n    getTimeToComplete() {\n        return this.timeToComplete\n    }\n}\n\nexport default AppContainer","class PercentageAnalyser {\n    analyse(text, progress, inputText, finishTime) {\n        const completePercentage = (progress / text.length * 100).toFixed(1) + '%'\n        return 'The completeness\\'s percentage is  ' + completePercentage\n    }\n}\n\nexport default PercentageAnalyser","class WPMAnalyser {\n    analyse(text, progress, inputText, finishTime) {\n        const wpm = (progress / 5 / (finishTime / 1000 / 60)).toFixed(1)\n        return `Your WPM is ${wpm}`\n    }\n}\n\nexport default WPMAnalyser","class TextMatchingStrategy {\n\n    text\n\n    constructor(text) {\n        this.text  = text\n        this.check = this.check.bind(this)\n    }\n\n    check(input) {\n        if (input.length === 0) return 0\n\n        let matchEndIndex = 0\n\n        while (matchEndIndex < input.length && this.text.charAt(matchEndIndex) === input.charAt(matchEndIndex))\n            matchEndIndex++\n\n        return matchEndIndex\n    }\n}\n\nexport default TextMatchingStrategy","import TextMatchingStrategy from './TextMatchingStrategy'\n\nclass MatchingStrategyFactory {\n    create(text) {\n        return new TextMatchingStrategy(text)\n    }\n}\n\nexport default MatchingStrategyFactory","class Result {\n\n    error\n    data\n\n    constructor(data, error) {\n        this.data  = data\n        this.error = error\n    }\n}\n\nexport default Result","import Result from './Result'\n\nclass StatsRepository {\n\n    httpClient\n    userRepository\n\n    constructor(httpClient, userRepository) {\n        this.httpClient     = httpClient\n        this.userRepository = userRepository\n    }\n\n    async save(stats) {\n\n        const jsonData = await this.httpClient.get('https://api.myjson.com/bins/sk100')\n\n        const currentUser = jsonData.data.find(user => user.username === this.userRepository.get().username)\n\n        if (!currentUser.stats) {\n            currentUser.stats = []\n        }\n        currentUser.stats.push([...stats, new Date()])\n\n        const savedStats = await this.httpClient.put('https://api.myjson.com/bins/sk100', jsonData.data)\n\n        return new Result(savedStats.data, null)\n    }\n\n    async get() {\n        const jsonData = await this.httpClient.get('https://api.myjson.com/bins/sk100')\n        return new Result(jsonData.data, null)\n    }\n}\n\nexport default StatsRepository","import Result from './Result'\n\nclass UserRepository {\n\n    subscribers = []\n    isLoggedIn  = !!localStorage.getItem('user')\n    httpClient\n\n    constructor(httpClient) {\n        this.httpClient = httpClient\n    }\n\n    async login(username) {\n        const jsonData = await this.httpClient.get('https://api.myjson.com/bins/sk100')\n\n        if (jsonData.data.find(user => user.username === username)) {\n            this.isLoggedIn = true\n            localStorage.setItem('user', JSON.stringify({username: username}))\n            this.notify('loginChange', this.isLoggedIn)\n            return new Result({}, null)\n        }\n\n        return new Result(null, `username ${username} is not correct`)\n    }\n\n    async register(username) {\n        const jsonData = await this.httpClient.get('https://api.myjson.com/bins/sk100')\n\n        if (jsonData.data.find(user => user.username === username)) {\n            return new Result(null, `username ${username} already exists`)\n        }\n\n        const response = await this.httpClient.put('https://api.myjson.com/bins/sk100', [\n            ...jsonData.data,\n            {username: username}\n        ])\n\n        return new Result(response.data, null)\n    }\n\n    logout() {\n        localStorage.removeItem('user')\n        this.isLoggedIn = false\n        this.notify('loginChange', this.isLoggedIn)\n    }\n\n    get() {\n        return JSON.parse(localStorage.getItem('user'))\n    }\n\n    notify(event, data) {\n        this.subscribers[event] && this.subscribers[event].forEach(func => {\n            func(data)\n        })\n    }\n\n    subscribe(event, func) {\n        if (!this.subscribers[event]) {\n            this.subscribers[event] = new Map()\n        }\n\n        this.subscribers[event].set(func.toString(), func)\n\n        return () => this.subscribers[event].delete(func.toString())\n    }\n}\n\nexport default UserRepository","import React, {useState}  from 'react'\nimport {useHistory}       from 'react-router'\nimport {withAppContainer} from '../../withAppContainer'\n\nconst Register = ({appContainer}) => {\n\n    const [username, setUsername] = useState(null)\n    const [error, setError]       = useState(null)\n    const history                 = useHistory()\n\n    const register = async () => {\n        if (!username) {\n            return\n        }\n        const result = await appContainer.getUserRepository().register(username)\n        if (result.error) {\n            setError(result.error)\n            return\n        }\n        history.push('/login')\n\n    }\n\n    const onChange = (e) => {\n        setUsername(e.target.value)\n    }\n\n    return (\n        <div>\n            <input type=\"text\" onChange={onChange}/>\n            <button onClick={register}>Register</button>\n            {error && <div style={{color: 'red'}}>{error}</div>}\n        </div>\n    )\n}\n\nexport default withAppContainer(Register)","import React, {useState}  from 'react'\nimport {withAppContainer} from '../../withAppContainer'\n\nconst Login = ({appContainer}) => {\n    const [username, setUsername] = useState(null)\n    const [error, setError]       = useState(null)\n\n    const login = async () => {\n        if (!username) {\n            return\n        }\n        const userRepo = appContainer.getUserRepository()\n        const result   = await userRepo.login(username)\n        if (result.error) {\n            setError(result.error)\n            return\n        }\n    }\n\n    const onChange = (e) => {\n        setUsername(e.target.value)\n    }\n\n    return (\n        <div>\n            <input type=\"text\" onChange={onChange}/>\n            <button onClick={login}>Login</button>\n            {error && <div style={{color: 'red'}}>{error}</div>}\n        </div>\n    )\n}\n\nexport default withAppContainer(Login)","import React              from 'react'\nimport {Redirect, Route}  from 'react-router'\nimport {withAppContainer} from '../withAppContainer'\n\nconst PrivateRoute = ({children, appContainer, path}) => {\n\n    if (appContainer.getUserRepository().isLoggedIn) {\n        return <Route path={path} component={() => children}/>\n    }\n\n    return <Redirect to={'/login'}/>\n}\n\nexport default withAppContainer(PrivateRoute)","import React, {useEffect, useState} from 'react'\nimport {withAppContainer}           from '../../withAppContainer'\n\nconst Stats = ({appContainer}) => {\n\n    const [stats, setStats] = useState(null)\n\n    useEffect(() => {\n\n        const statsRepository = appContainer.getStatsRepository()\n\n        Promise.resolve().then(async () => {\n            const allStats  = await statsRepository.get()\n            const userStats = allStats.data.find(user => user.username === appContainer.getUserRepository().get().username)\n\n            setStats(\n                userStats\n            )\n        })\n\n    }, [appContainer])\n\n    return (\n        <div style={{margin: '0 auto', width: 800}}>\n            {stats && (\n                <>\n                    <h1>{stats.username}</h1>\n                    {stats.stats.map((stat, key) => {\n                        return (\n                            <div key={key} style={{marginBottom: 8}}>\n                                {stat.map((st, key) => <div\n                                    key={st}>{key === stat.length - 1 ? (new Date(st)).toString() : st}</div>)}\n                            </div>\n                        )\n                    })}\n                </>\n            )}\n        </div>\n    )\n}\n\nexport default withAppContainer(Stats)","import React              from 'react'\nimport {Redirect, Route}  from 'react-router'\nimport {withAppContainer} from '../withAppContainer'\n\nconst PublicRoute = ({children, appContainer, path}) => {\n\n    if (!appContainer.getUserRepository().isLoggedIn) {\n        return <Route path={path} component={() => children}/>\n    }\n\n    return <Redirect to={'/board'}/>\n}\n\nexport default withAppContainer(PublicRoute)","import React, {useEffect, useState}                      from 'react'\nimport axios                                             from 'axios'\nimport {BrowserRouter as Router, Link, Redirect, Switch} from 'react-router-dom'\nimport Board                                             from './components/board/Board'\nimport TextProvider                                      from './app/TextProvider'\nimport AppContainer                                      from './app/AppContainer'\nimport {AppContainerCtx}                                 from './withAppContainer'\nimport PercentageAnalyser                                from './app/PercentageAnalyser'\nimport WPMAnalyser                                       from './app/WPMAnalyser'\nimport MatchingStrategyFactory                           from './app/MatchingStrategyFactory'\nimport StatsRepository                                   from './app/StatsRepository'\nimport UserRepository                                    from './app/UserRepository'\nimport Register                                          from './components/auth/Register'\nimport Login                                             from './components/auth/Login'\nimport PrivateRoute                                      from './commons/PrivateRoute'\nimport Stats                                             from './components/stats/Stats'\nimport PublicRoute                                       from './commons/PublicRoute'\n\nconst timeFromUrl = new URL(window.location).searchParams.get('time')\n\nconst TIME_TO_COMPLETE = timeFromUrl ? timeFromUrl : 180_000\n\nfunction App() {\n\n\n    const textProvider    = new TextProvider(axios)\n    const userRepository  = new UserRepository(axios)\n    const statsRepository = new StatsRepository(axios, userRepository)\n\n    const appContainer = new AppContainer(\n        textProvider,\n        new MatchingStrategyFactory(),\n        [new PercentageAnalyser(), new WPMAnalyser()],\n        statsRepository,\n        userRepository,\n        TIME_TO_COMPLETE,\n    )\n\n    const [, setLoggedIn] = useState(userRepository.isLoggedIn)\n\n    useEffect(() => {\n        userRepository.subscribe('loginChange', (loginState) => {\n            setLoggedIn(loginState)\n        })\n    }, [userRepository])\n\n    return (\n        <Router>\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    Type Racer\n                </header>\n                <nav>\n                    <ul>\n                        {!userRepository.isLoggedIn ? (\n                            <>\n                                <li>\n                                    <Link to=\"/login\">Login</Link>\n                                </li>\n                                <li>\n                                    <Link to=\"/register\">Register</Link>\n                                </li>\n                            </>\n                        ) : (\n                            <>\n                                <li>\n                                    <Link to=\"/board\">Board</Link>\n                                </li>\n                                <li>\n                                    <Link to=\"/stats\">Stats</Link>\n                                </li>\n                                <li onClick={() => {\n                                    userRepository.logout()\n                                }}>\n                                    Logout\n                                </li>\n                            </>\n                        )}\n                    </ul>\n                </nav>\n                <AppContainerCtx.Provider value={{\n                    appContainer,\n                }}>\n                    <Switch>\n                        <PrivateRoute path=\"/board\">\n                            <Board/>\n                        </PrivateRoute>\n                        <PrivateRoute path=\"/stats\">\n                            <Stats/>\n                        </PrivateRoute>\n                        <PublicRoute path=\"/register\">\n                            <Register/>\n                        </PublicRoute>\n                        <PublicRoute path=\"/login\">\n                            <Login/>\n                        </PublicRoute>\n                        <Redirect to={'/board'}/>\n                    </Switch>\n                </AppContainerCtx.Provider>\n            </div>\n        </Router>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n)\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://bit.ly/CRA-PWA',\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: {'Service-Worker': 'script'},\n    })\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.',\n            )\n        })\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then(registration => {\n                registration.unregister()\n            })\n            .catch(error => {\n                console.error(error.message)\n            })\n    }\n}\n","import React              from 'react'\nimport ReactDOM           from 'react-dom'\nimport './index.css'\nimport App                from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App/>, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}